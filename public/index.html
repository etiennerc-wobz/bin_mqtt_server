<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bin Operation Interface</title>
    <script>
        function fetchMessages() {
            fetch('/api/messages')
            .then(response => response.json())
                .then(data => {
                    document.getElementById('current-value').textContent = data.current !== null ? data.current : '-';
                    document.getElementById('limit-value').textContent = data.limit !== null ? data.limit : '-';
                })
                .catch(error => console.error('Erreur lors de la récupération des messages MQTT:', error));
        }
        // Mettre à jour les messages toutes les 2 secondes
        setInterval(fetchMessages, 2000);
    </script>

</head>
<body>

    <h1>Bin Operation Web Interface</h1>&
    <p><strong>Limite:</strong> <span id="limit-value">Chargement...</span></p>
    <p><strong>Quantité collectée:</strong> <span id="current-value">Chargement...</span></p>
    <p><strong>Modifier limite:</strong></p>
    <form action="/publish_limit" method="post">
        <input type="text" name="message" placeholder="Entrez un nombre">
        <button type="submit">Envoyer</button>
    </form>
    <p><strong>Opération:</strong></p>
    <form action="/reset" method="post">
        <button type="submit">Reset</button>
    </form>
</body>
</html>
